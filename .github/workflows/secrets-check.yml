name: Secrets Check

on:
  workflow_dispatch:

jobs:
  check-staging:
    name: Check staging secrets
    runs-on: ubuntu-latest
    steps:
      - name: Verify staging Cloudflare token presence
        env:
          PUBLIC_DEPLOY_ENV: staging
          PUBLIC_CLOUDFLARE_ANALYTICS_TOKEN: ${{ secrets.CLOUDFLARE_TOKEN_STAGING }}
        run: |
          echo "Deploy env: ${PUBLIC_DEPLOY_ENV:-unset}"
          if [ -n "${PUBLIC_CLOUDFLARE_ANALYTICS_TOKEN:-}" ]; then
            echo "Cloudflare staging token is set (masked)."
          else
            echo "Cloudflare staging token is NOT set."
          fi

  check-production:
    name: Check production secrets
    runs-on: ubuntu-latest
    steps:
      - name: Verify production Cloudflare token presence
        env:
          PUBLIC_DEPLOY_ENV: production
          PUBLIC_CLOUDFLARE_ANALYTICS_TOKEN: ${{ secrets.CLOUDFLARE_TOKEN_PROD }}
        run: |
          echo "Deploy env: ${PUBLIC_DEPLOY_ENV:-unset}"
          if [ -n "${PUBLIC_CLOUDFLARE_ANALYTICS_TOKEN:-}" ]; then
            echo "Cloudflare production token is set (masked)."
          else
            echo "Cloudflare production token is NOT set."
          fi
